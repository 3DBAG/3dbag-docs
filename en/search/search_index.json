{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Overview","text":"<p>Welcome to the documentation of the 3D BAG! This is the first open 3D building data set that is generated fully automatically and covers a whole country on this level of detail.</p> <p>On this page you will find information on what is the 3D BAG and how it is created, a few of the possible use cases and how does the 3D BAG relate to similar data sets in the Netherlands.</p> <ul> <li>Data Sources describes the data sets that are used as input for the 3D BAG.</li> <li>Schema describes the structure of the 3D BAG in detail.</li> <li>Data Formats describes the different ways we deliver the 3D BAG.</li> <li>Terms of Use explains the conditions that apply when using the 3D BAG in your application.</li> <li>Contact shows where you can ask questions or how can you contact us.</li> <li>And with the Viewer you can view the 3D BAG in your browser!</li> </ul>"},{"location":"#what-is-the-3d-bag","title":"What is the 3D BAG?","text":"<p>The 3D BAG is an up-to-date data set containing 3D building models of the Netherlands. The 3D BAG is open data. It contains 3D models at multiple levels of detail, which are generated by combining two open data sets: the building data from the BAG and the height data from the AHN. The 3D BAG is updated regularly, keeping it up-to-date with the latest openly available building stock and elevation information.</p> <p>The 3D BAG is also a place for experiments. It is a medium for testing ideas as we do in the 3D geoinformation research group. Based on experiences with the data, we are constantly improving our methods, and by providing our own service we retain full control over the whole process from input data, pre-processing and reconstruction to querying and using the reconstructed 3D data in urban applications. This allows us to develop, test and release improvements, or even break things, as we see best.</p>"},{"location":"#main-features","title":"Main features","text":"<ul> <li>Three levels of detail.     Pick the most suitable LoD for your application from the available LoD1.2, LoD1.3 and LoD2.2.</li> <li>Both 2D and 3D.     Besides the 3D models, we also offer the 2D projections of their roof surfaces with associated height references.</li> <li>Underground and overlapping buildings and building parts removed.     The completely underground and overlapping buildings (eg one building \"floating\" above another) are excluded from the reconstruction. Buildings with parts under the terrain have their underground parts cut off.</li> <li>Fall back to a simple model for problematic input.     Buildings with glass roofs, especially greenhouses, have an inconsistent point cloud in the AHN. For these buildings, that usually have a very simple shape anyways, we fall back to a simplified 3D model in order to generate usable models.</li> <li>Quality control integrated.     We run our 3D models through val3dity, so that you don't need to validate the 3D data yourself.</li> <li>Available in several formats.     CityJSON, GeoPackage, Wavefront OBJ, WMS, WFS.</li> </ul>"},{"location":"#common-applications","title":"Common applications","text":"<p>Some of the use cases for this data set that we know about:</p> <ul> <li>Applications related to energy use in buildings, such as estimating energy demand, retrofitting costs, finding suitable roofs for solar panels.</li> <li>Simulating the wind flow and pollutant dispersion in urban areas (eg. Simwind)</li> <li>Calculating noise pollution in urban areas (eg. 3D Noise)</li> <li>Analysing the urban structure and evaluating new developments.</li> </ul> <p>Do you have an interesting use case for the 3D BAG? We would love to hear about it!</p>"},{"location":"#relation-to-similar-data-sets","title":"Relation to similar data sets","text":""},{"location":"#3d-basisvoorziening","title":"3D Basisvoorziening","text":"<p>The 3D Basisvoorziening is a collection of Dutch national 3D data sets created in a collaboration of the Kadaster and the 3D geoinformation research group. It was made available in the summer of 2020. While the 3D BAG only contains objects from the BAG, the 3D Basisvoorziening also contains object from the Large Scale Topographic Map (BGT) of the Netherlands. Thus, the 3D BAG only contains buildings, while the 3D Basisvoorziening is a watertight 3D model of the whole country, including terrain objects. Furthermore, the 3D BAG only uses the AHN as height source, while the 3D Basisvoorziening also uses a yearly updated point cloud created from stereo images (Beeldmateriaal Nederland).</p> <p>The tools and algorithms that are used for generating the 3D Basisvoorziening, are created by the 3D geoinformation group. In fact, the LoD1.3 models in the 3D Basisvoorziening were generated with a previous, more stable version of the same algorithms that we use in the 3D BAG. Since then, we have improved the reconstruction process specifically for a better LoD2.2 reconstruction.</p>"},{"location":"#3d-geluid","title":"3D Geluid","text":"<p>The 3D Geluid data set was created in collaboration with the National Institute for Public Health and the Environment (RIVM), Ministry of Infrastructure and Water Management (Rijkswaterstaat), Interprovinciaal Overleg, Kadaster and the 3D geoinformation research group.</p> <p>Both the 3D Geluid and the 3D BAG use the BAG as a basis for the buildings. While the 3D BAG uses the AHN only, the 3D Geluid data has been extended with LoD1.2 models that were generated with the current point cloud of Kadaster where the buildings are newer than AHN.</p> <p>Besides building models, the 3D Geluid data also contains two additional layers that model the height of the terrain, and the sound absorption values of the various terrain objects. The building models in 3D Geluid data are LoD1.3 and represented as 2D only, since the current common noise calculation software can only handle 2D buildings (+ height attribute).</p> <p>Similarly to the 3D Basisvoorziening, the LoD1.3 models in the 3D Geluid data were generated with a previous, more stable version of the same algorithms that we use in the 3D BAG.</p>"},{"location":"#funding","title":"Funding","text":"<p> This project has received funding from the European Research Council (ERC) under the European Unions Horizon2020 Research &amp; Innovation Programme: grant agreement no. 677312 UMnD: Urban modelling in higher dimensions and grant agreement no. 101068452 3DBAG: detailed 3D Building models Automatically Generated for very large areas</p> <p>The technology behind the 3D BAG service was developed by the 3D Geoinformation research group, Department of Urbanism at the Delft University of Technology. This has been done in various research projects. Funding has been received from the European Commission (ERC), the Netherlands Organization for Scientific Research (NWO), and the Amsterdam Institute of Advanced Metropolitan Solutions (AMS). The algorithms have been further improved in collaborations with partners such as RIVM, Rijkswaterstaat and Kadaster.</p>"},{"location":"contact/","title":"Contact","text":""},{"location":"contact/#help","title":"Help","text":"<p>If you have questions or need help about the data, go to https://geoforum.nl/. When posting questions on the forum, please use the tag <code>3D BAG</code>. Although the forum is mainly in Dutch, you are free to use English of course.</p>"},{"location":"contact/#feedback","title":"Feedback","text":"<p>We are very happy to hear whatever you have to say about the 3D BAG. You can give your feedback via this form.</p> <p></p> <p>If you want to report issues with specific models, you can do so by clicking on the model in the 3D viewer, and then clicking on the red Report a problem button in the Building Information viewer.</p>"},{"location":"contact/#viewer","title":"Viewer","text":"<p>At the GitHub repository of the viewer, bugs specifically in the viewer can be reported.</p> <p>Special thanks to NASA AMMOS for 3DTilesRendererJS, which is used for visualising the buildings, and to Geodan for pg2b3dm, used to export our data to 3D Tiles.</p>"},{"location":"contact/#mail","title":"Mail","text":"<p>Finally, you an also contact us directly at info@3dbag.nl.</p>"},{"location":"copyright/","title":"Copyright and License","text":""},{"location":"copyright/#data-and-documentation","title":"Data and Documentation","text":"<p>3D BAG by 3D geoinformation research group and 3DGI is licensed under CC BY 4.0</p> <p>The 3D BAG is open data. This includes all downloadable data files and data distributed through web services. You are free to copy, distribute, and adapt the 3D BAG data, as long as you,</p> <ol> <li>give credit to the 3D geoinformation group and 3DGI,</li> <li>provide a link to this license,</li> <li>indicate if you made any changes to the data.</li> </ol> <p>Note that some content in the documentation is reused from other works. Such content has its source marked explicitly, and you need to comply with their respective license when using them.</p>"},{"location":"copyright/#how-to-credit-the-3d-bag-data","title":"How to credit the 3D BAG data","text":"<p>We require that you use the credit \u201c\u00a9 3D BAG by tudelft3d and 3DGI\u201d. </p> <p>In digital media you must also provide a link to this copyright page. In printed media, or where links are not possible, its best if you expand the credit to \"3D BAG by 3D geoinformation research group (TU Delft) and 3DGI\" and direct the readers to \"3dbag.nl\".</p> <p>The name tudelft3d is a short alias to the full name 3D geoinformation research group.</p> <p>If you integrate the 3D BAG data in a browsable electronic map, the credit should appear in the bottom right corner of the map.</p>"},{"location":"copyright/#how-to-cite-3d-bag","title":"How to cite 3D BAG","text":"<p>Refer to the the article Automated 3D Reconstruction of LoD2 and LoD1 Models for All 10 Million Buildings of the Netherlands.</p> <pre><code>@misc{peters2022,\n      title={Automated 3D reconstruction of LoD2 and LoD1 models for all 10 million buildings of the Netherlands}, \n      author = \"Ravi Peters and Bal{\\'a}zs Dukai and Stelios Vitalis and {van Liempt}, Jordi and Jantien Stoter\",\n      year = \"2022\",\n      doi = \"10.14358/PERS.21-00032R2\",\n      language = \"English\",\n      volume = \"88\",\n      pages = \"165--170\",\n      journal = \"Photogrammetric Engineering and Remote Sensing\",\n      issn = \"0099-1112\",\n      publisher = \"American Society for Photogrammetry and Remote Sensing\",\n      number = \"3\",\n}\n</code></pre>"},{"location":"copyright/#software","title":"Software","text":"<p>The software and components that we created for making and serving the 3D BAG are licensed independently of the 3D BAG data and documentation.</p> <p>Our viewer relies on 3DTilesRendererJS (license) by NASA AMMOS and pg2b3dm (license) by Geodan.</p>"},{"location":"delivery/cityjson/","title":"CityJSON","text":"<p>CityJSON is an open data format for distributing 3D city models (also known as digital twins), and a JSON-encoding of the CityGML data model. CityJSON is in the process of becoming a community standard of the Open Geospatial Consortium.</p> <p>The CityJSON specification prescribes how to store the 3D geometry as well as the semantics of common objects in a city, eg. buildings, vegetation, roads, waterways and bridges. This makes the the data model optimal for spatial analysis.</p> <p>The three guiding principles for the format are compactness, simplicity and ease of use for software development. CityJSON has approximately a 6x smaller size than CityGML due to the JSON-encoding. Furthermore, there are already several open software that work with CityJSON files. We present a few of them below. Try them out!</p> <p>The CityJSON files of the 3D BAG contain all the 3D layers (LoD1.2, LoD1.3, LoD2.2), but only the attributes that apply to the whole building.</p>"},{"location":"delivery/cityjson/#ninja-and-azul","title":"ninja and azul","text":"<p>ninja is a drag-and-drop web application for visualising and editing CityJSON files.</p> <p>On macOS azul can visualise several data formats, including CityJSON.</p> A portion of the 3D BAG visualised in ninja. A portion of the 3D BAG visualised in azul."},{"location":"delivery/cityjson/#qgis-cityjson-loader-plugin","title":"QGIS CityJSON Loader plugin","text":"<p>With the CityJSON loader plugin it is possible to load CityJSON files into QGIS 3, and view them in 3D. You can open the 3D viewer by selecting <code>View</code> -&gt; <code>New 3D Map View</code>. For QGIS 3 versions older than 3.2, there is an extra step necessary.</p> A portion of the 3D BAG visualised in QGIS, with the 3D Map View on the top and the features in 2D on the bottom."},{"location":"delivery/cityjson/#cjio","title":"cjio","text":"<p>cjio is tool with a command-line-interface for working with CityJSON files. For instance, you can get information about the file contents, subset and merge files, convert them to other formats etc.</p> <p>List all the attributes (and more) in a 3D BAG file:</p> <pre><code>cjio 3dbag_&lt;version&gt;_&lt;tile ID&gt;.json info --long\n</code></pre> <p>Extract only the LoD2.2 from a 3D BAG file:</p> <pre><code>cjio 3dbag_&lt;version&gt;_&lt;tile ID&gt;.json extract_lod 2 save out.json\n</code></pre>"},{"location":"delivery/gpkg/","title":"GeoPackage","text":"<p>GeoPackage is an open geodata format, based on SQLite. It supports vector features, tile matrix sets, attributes and also extensions. The format can be used for storing certain types of 3D geometry. It is widely adopted an can be used in QGIS, ArcGIS and FME too.</p> <p>We have 3D BAG GeoPackage files available separately for each tile, and we also offer one big file that contains the entire 3D BAG dataset. The GeoPackage files contain all the layers.</p>"},{"location":"delivery/gpkg/#geopackage-data-dump-file","title":"GeoPackage data dump file","text":"<p>When working with the compressed GeoPackage files, it is not strictly necessary to decompress them. GDAL supports virtual file systems, which allows to access the contents of the compressed .gpkg without decompressing the file first. The GeoPackage that contains the entire 3D BAG (the data dump file) has been compressed as a Seek-Optimized ZIP (SOZip) file. GDAL (from version 3.7) supports the seek-optimized profile for .zip files, giving an improved performance.</p> <p>An example GDAL command for accessing the uncompressed Netherlands GeoPackage:</p> <p><code>ogrinfo -so -al /vsizip/nl_3dbag.gpkg.zip</code></p>"},{"location":"delivery/gpkg/#geopackage-in-3d-in-qgis","title":"GeoPackage in 3D in QGIS","text":"<p>When opening a 3D BAG file in QGIS (by dragging the file or going to <code>Layer</code> -&gt; <code>Add Layer</code> -&gt; <code>Add Vector Layer...</code>), you can choose which layers to import. In QGIS 3 it is possible to view the 3D layers in the 3D viewer (exact steps may vary between versions):</p> <ol> <li> <p>Adjust the <code>Layer Properties</code>. Go to the <code>3D View</code> tab and change <code>No Symbols</code> to <code>Single Symbol</code> and adjust the settings to your preference. In older QGIS 3 versions you will find the button <code>Enable 3D renderer</code> instead.</p> </li> <li> <p>Go to <code>View</code> -&gt; <code>3D Map View</code> to open the 3D viewer.</p> </li> </ol> The tab in the Layer Properties with the settings for the 3D Map View. A portion of the 3D BAG data in GeoPackage format. On the top is the 3D Map View, in the left the attributes, and in the bottom the 2D features."},{"location":"delivery/obj/","title":"Wavefront OBJ","text":"<p>Wavefront OBJ is an open data format for 3D graphics. It does not contain any attributes or semantics, only the 3D geometry of the building models. This format is primarily suitable for importing the 3D BAG geometries into 3D graphics applications or 3D CAD applicatons (this might require additional format conversion).</p> <p>The OBJ files for the 3D BAG contain the 3D geometries only and each 3D layer is stored in a separate file. The three OBJ files are compressed into a single ZIP file per tile. The object coordinates are in the Amersfoort / RD New + NAP height coordinate reference system.</p>"},{"location":"delivery/obj/#blender","title":"Blender","text":"A portion of the 3D BAG data opened in Blender. <p>OBJ files can be directly opened in Blender. Besides, there is also a plugin for importing CityJSON files into Blender.</p> <p>The objects in the files are a real-world coordinate system. Therefore they have very large coordinates. When the file is imported into Blender, they are not centered around the origin (0, 0, 0) which causes the surfaces to flicker. Therefore, it is recommended to move the objects to the origin.</p> <p>When importing the OBJ file, choose the option <code>Z Up</code>, so that the objects are correctly oriented. If you turn off the <code>Split by Object</code>, then all objects (the buildings) are imported as a single Blender object, which makes it easier to move the whole file content. After the import, you can focus the camera to the objects by selecting <code>Scene Collection</code> on the right of the screen, then pressing <code>.</code> on the numpad (the regular <code>.</code> on the keyboard does not work).</p> <p>Then select the object (or all individual objects if split them on import) and press <code>Tab</code> to open the Edit Mode. Then click on the small arrow that is marked in the screenshot above.</p> <p>Then change the X and Y values to <code>0</code>. Press <code>.</code> on the numpad again to re-focus the camera on the model.</p>"},{"location":"delivery/webservices/","title":"Webservices","text":"<p>Webservices make it possible to specify via an URL exactly which models to download from the 3D BAG. All major GIS software supports these services.</p> <p>From the 3D BAG we serve the 2D layers and the tile set that we use for distributing the data in various formats. You can find the webservice links on the 3D BAG Downloads page.</p>"},{"location":"delivery/webservices/#wfs","title":"WFS","text":"<p>The Web Feature Service (WFS) is an Open Geospatial Consortium standard, and it describes how to query, create and modify geospatial data through the internet.</p> <p>Available layers:</p> <ul> <li>lod12</li> <li>lod13</li> <li>lod22</li> <li>tiles</li> </ul> LoD1.3 2D WFS layer visualised in QGIS, with the BRT Baselayer from PDOK in the background."},{"location":"delivery/webservices/#wms","title":"WMS","text":"<p>The Web Map Service is an Open Geospatial Consortium standard to retrieve maps as images through the internet.</p> LoD1.3 2D WMS layer visualised in QGIS, with the BRT Baselayer from PDOK in the background."},{"location":"delivery/webservices/#webservices-in-qgis","title":"Webservices in QGIS","text":"<p>Here you find a tutorial on using webservices in QGIS, created by one of our colleagues of the 3D geoinformation research group. At <code>3:18</code> in the video you can see how to load the webservices of the previous 3D BAG version. The process is almost the same for the current 3D BAG version.</p> <p>The video also refers to the PDOK services plugin, which is very handy for loading base layers.</p>"},{"location":"overview/group/","title":"About Us","text":"<p>The 3D geoinformation research group is part of the Delft University of Technology, and is affiliated with AMS, the Amsterdam Institute for Advanced Metropolitan Solutions. It focuses on the technologies underpinning geographical information systems (GIS), and aims at designing, developing, and implementing better systems to model 3D cities, buildings, and landscapes. These systems help in environmental modelling, urban planning, crisis management, automated cartographic generalisation, information modelling, modelling of the interior of buildings, etc. It is a multidisciplinary group, consisting of computer scientists, geomatics engineers, and geographers.</p> <p>3DGI is a spin-off of the research group and does consultancy and software development in the field of 3D geo-information.</p> <p>The 3D BAG is currently maintained by:</p> <ul> <li>Bal\u00e1zs Dukai (3DGI)</li> <li>Ravi Peters (3DGI)</li> <li>Gina Stavropoulou (tudelft3d)</li> <li>Jantien Stoter (tudelft3d)</li> </ul> <p>In the past also the following persons have contributed to the creation of the 3DBAG:</p> <ul> <li>Jordi van Liempt</li> <li>Stelios Vitalis</li> <li>Teng Wu</li> </ul>"},{"location":"overview/media/","title":"In the media","text":"<p>Below you can find a list of notable articles, posts, tweets and videos about 3D BAG. Please send us a mail if you think something is missing!</p>"},{"location":"overview/media/#applications-of-3d-bag","title":"Applications of 3D BAG","text":"<ul> <li>3D printing<ul> <li>CityScale</li> <li>Heinze Havinga</li> </ul> </li> <li>Wind simulation by Frank Van Gool</li> <li>Solar analysis by Dennis Hulsegge</li> <li>Flood simulation by Maxim Knepfle</li> <li>Old Cadastral boundaries in project Virtueel Hoogeveen by Andy Benjamins</li> <li>Shadow analysis in Revit by Ekko Nap</li> <li>Energy transition for the built environment<ul> <li>VNG</li> <li>Tomahawk</li> </ul> </li> <li>BIM integration by IRP</li> <li>Revit integration by Enveo</li> <li>Subdivision of 3DBAG into indoor entities by Coders CO.</li> </ul>"},{"location":"overview/media/#public-adoption-of-3d-bag-in-other-platforms","title":"Public adoption of 3D BAG in other platforms","text":"<ul> <li>Amsterdam 3D</li> <li>Utrecht 3D</li> <li>Zwolle</li> <li>ESRI<ul> <li>Dordrecht by Niels van der Vaart</li> <li>Amersfoort by Maarten Welmers</li> </ul> </li> <li>Signum</li> <li>SpotInfo</li> <li>ROM3D</li> <li>Shint\u014d Labs</li> </ul>"},{"location":"overview/media/#tools-and-tutorials-on-3d-bag","title":"Tools and tutorials on 3D BAG","text":"<ul> <li>Blender Hoogtedata Addon</li> <li>GIS2BIM tool for Dynamo by Maarten Vroegindeweij</li> <li>Infraworks video tutorial by Richard de Nier</li> <li>3D BAG in Revit video by BFAS</li> <li>3D BAG in AutoCAD article + video by RODEMA</li> <li>3D BAG CityJSON to IFC article + video by Hans Lammerts</li> <li>How-to: 3D BAG TU Delft naar ArcGIS</li> </ul>"},{"location":"overview/media/#3d-bag-in-the-news","title":"3D BAG in the news","text":"<ul> <li>Used in the interactive maps for the Dutch tv-programme Ruimteschip Aarde</li> <li>3DBAG gets ERC funding</li> <li>3D BAG wins the 2021 Geospatial World Excellence Award in the Content Platform category</li> <li>Reddit</li> <li>Tweakers.net</li> <li>Geo-Info</li> <li>BK nieuws</li> <li>LinkedIn announcement by Jantien Stoter</li> </ul>"},{"location":"overview/media/#publications-using-3dbag","title":"Publications using 3DBAG","text":"<ul> <li>Automatic Building Age Prediction from Street View Images</li> </ul>"},{"location":"overview/release_notes/","title":"Release Notes","text":""},{"location":"overview/release_notes/#20230809-beta","title":"2023.08.09 \u2013 beta","text":"<p>Release date: 9 August 2023</p> <p>With this release we fix an error with the attributes <code>h_dak_min</code>, <code>h_dak_50p</code>, <code>h_dak_70p</code>, <code>h_dak_max</code> in the GPKG and WFS formats. In 3DBAG version 2023.06.22 the values of these attributes were off by 15 meters. This is fixed in this release.</p>"},{"location":"overview/release_notes/#changed-fixed","title":"Changed / Fixed","text":"<ul> <li>Fix 15 meter offset in <code>h_dak_min</code>, <code>h_dak_50p</code>, <code>h_dak_70p</code>, <code>h_dak_max</code> attributes on roofparts in GPKG and WFS formats.</li> </ul>"},{"location":"overview/release_notes/#20230622-beta","title":"2023.06.22 \u2013 beta","text":"<p>Release date: 22 June 2023</p> <p>This is the third public beta release of the 3D BAG. It's been a while since the second release. As it turns out it costs quite some work to properly maintain and update 3D BAG next to our busy day jobs. Fortunately we were able to receive funding from the ERC to bring the 3D BAG to a level where it can be maintained and developed reliably. The current release is the first of three that is financed by the ERC budget, and it paves the way towards a stable, open 3D BAG service. We are very happy to see that so many people found a use for 3D BAG to help them with their business, research or hobby projects. And we remain committed to keep maintaining 3D BAG into the future, of course as an open dataset. </p> <p>The team behind 3D BAG has changed in the sense that some people have moved on to other jobs, others are working on 3D BAG with a different affiliation (3DGI, a spinoff of the tudelft3d research group) and we also have welcomed a new member.</p> <p>The biggest technical change is that the 3D BAG now uses the AHN4 pointcloud which was acquired between 2020 and 2022. This means that the building models are much more up-to-date, compared to the previous release which was based solely on AHN3 (acquired starting from 2014). For this new release we use a 'smart' combination of AHN3 and AHN4. We did not opt for a simple 'drop-in' replacement of AHN3 by AHN4 because of the quality issues that we discovered in AHN4. These issues affect a small, yet significant fraction of the buildings. The 'smart' combination entails that our algorithms automatically select the 'best' available point cloud on a per building basis. The selection is based primarily on point coverage, ie. how well the roof surface of a building is covered with AHN points and most importantly if there are any big gaps. Naturally, AHN3 is only considered when a building has not changed compared to the AHN4 data. AHN3 is used for ~8.5% of the buildings, the rest all uses AHN4.</p> <p>There are also some changes in the BAG viewer and the download page. Most notably, the viewer now brings you to an interesting landmark that is randomly picked when you load the website, and all 3D BAG attributes are now visible in the viewer. The download page now also offers a metadata file about the dataset as a whole (including lineage) and the PostgreSQL dump was replaced by one big GPKG file (something that several people have asked for).</p> <p>And last, but not least: behind the scenes a lot of work has been done to completely recreate our automatic building reconstruction pipeline. This helps us to reliably produce new 3D BAG releases from now on. A tangible benefit to the 3DBAG users is that we now have much fewer missing buildings compared to the previous releases. We will continue to work on our pipeline in the background and streamline our internal processes even further.</p> <p>This release contains a record number of 10 383 384 builings. The overall geometric val3dity is also at a record at 99.15% (up from 98.25% in the previous release, counted on the LoD2.2 geometries).</p> <p>Thank you for using the 3D BAG! As always our feedback forms are available and we are reading all the emails that we receive at info@3dbag.nl.</p> <p>-- The 3D BAG Team</p>"},{"location":"overview/release_notes/#update-11-07-2023","title":"Update 11-07-2023","text":"<ul> <li>Regenerated 3D tiles to fix a number of display issues in the 3D BAG viewer, including incorrect placement of search result marker.</li> </ul>"},{"location":"overview/release_notes/#added","title":"Added","text":"<ul> <li>The building part ID (<code>pand_deel_id</code>) to the 3D layers. Previously it was only part of the 2D layers.</li> <li>Reconstruction algorithm<ul> <li>added procedure for automatic selection of pointcloud (AHN3 or 4) best suited for reconstruction on a per building basis</li> <li>building volumes are now calculated and outputted</li> <li>changed the method for calculating the height attributes on roofparts</li> </ul> </li> <li>A metadata file is now available on the download page. The metadata contains information about the current release, including the versions of the source data sets and the versions of the software that were used for producing the release. The metadata file unifies some of the information that were previously scattered across different formats.</li> <li>3D BAG viewer<ul> <li>When opening the 3D BAG viewer you are brought to a random landmark</li> <li>You can now view all attributes directly in the viewer</li> <li>Clicking on the attribute name in the viewer attribute table now brings you to the corresponding section in the documentation</li> <li>Update basemap to Luchfoto Actueel</li> </ul> </li> <li>Various quality attributes relating to the 'smart' point cloud selection algorithm.</li> <li>3DGI attribution</li> <li>Created a 3D BAG twitter account. Follow this to be notified about 3D BAG updates and other announcements.</li> <li>SHA-256 hashes for the downloadable files (included on the <code>tiles</code> WMS/WFS layer).</li> <li>Download link for each format (included on the <code>tiles</code> WMS/WFS layer).</li> <li>Extended testing of all data formats (included on the <code>tiles</code> WMS/WFS layer).</li> </ul>"},{"location":"overview/release_notes/#changed-fixed_1","title":"Changed / Fixed","text":"<ul> <li>Update of the source vector data sets (BAG, Top10NL) to the version available on 2023-06-05 (TOP10NL) and 2023-06-08 (BAG).</li> <li>Update of the source point cloud data sets. Now AHN3 and AHN4 are used.</li> <li>Significantly fewer missing buildings, due to revamped processing pipeline.</li> <li>Improved geometric validity. Now 99.15% of buildings are geometrically valid.</li> <li>New tiling scheme for downloads.</li> <li>New file naming.</li> <li>3D BAG version number is now a full date instead of a mix between date and minor version number.</li> <li>All 3D BAG specific attributes are now preceded by the <code>b3_</code> prefix.</li> <li>The postgres database dump was replaced by one big gpkg file zipped into a seek-optimized ZIP (SOZip) file.</li> <li>Improvements in the reconstruction algorithm<ul> <li>new procedure for overlap detection between buildings. In this procedure it is guaranteed that points on areas of overlap are only assigned to one of the overlapping buildings.</li> <li>fine tuning of snapping thresholds to achieve better geomtric validity</li> <li>various small improvements</li> </ul> </li> <li>The layer <code>ondergrond</code> was removed.</li> <li>Changed WFS/WMS namespace from <code>BAG3D_v2</code> to <code>BAG3D</code>.</li> <li>Attribute changes:</li> </ul> v21.09 v2023.06 (release) gid - fid - pand_deel_id b3_pand_deel_id dd_id b3_dd_id - tijdstipregistratie - eindregistratie h_maaiveld b3_h_maaiveld dak_type b3_dak_type pw_datum b3_pw_datum pw_actueel - pw_bron b3_pw_bron reconstructie_methode - versie_methode - kas_warenhuis b3_kas_warenhuis ondergronds_type - reconstruction_skipped b3_reconstructie_onvolledig lod11_replace - h_dak_min b3_h_dak_min h_dak_50p b3_h_dak_50p h_dak_70p b3_h_dak_70p h_dak_max b3_h_dak_max val3dity_codes_lod12 b3_val3dity_lod12 val3dity_codes_lod13 b3_val3dity_lod13 val3dity_codes_lod22 b3_val3dity_lod22 semantics_values - rmse_lod12 b3_rmse_lod12 rmse_lod13 b3_rmse_lod13 rmse_lod22 b3_rmse_lod22 rn - - b3_mutatie_ahn3_ahn4 - b3_nodata_fractie_ahn3 - b3_nodata_fractie_ahn4 - b3_nodata_radius_ahn3 - b3_nodata_radius_ahn4 - b3_pw_selectie_reden - b3_puntdichtheid_ahn3 - b3_puntdichtheid_ahn4 - b3_volume_lod12 - b3_volume_lod13 - b3_volume_lod22"},{"location":"overview/release_notes/#known-issues","title":"Known issues","text":"<ul> <li>BAG date/time attributes in GPKG output are of the string type.</li> <li>Missing tiles from download page: <code>7/1008/656</code>, <code>8/720/344</code>, <code>9/1000/1068</code>. The 3D BAG viewer may have some additional tiles missing.</li> <li>Small number of 3D models have invalid geometry. This affects less than 1% of the models.</li> <li>Some attributes are missing from the WMS/WFS layers.</li> <li>The GPKG data dump has a small number of duplicate features.</li> <li>The GPKG files have incorrect height attributes (<code>b3_h_*</code>)</li> </ul>"},{"location":"overview/release_notes/#21098-beta","title":"21.09.8 \u2013 beta","text":"<p>Release date: 29 September 2021</p> <p>This is the second public beta release of the renewed 3D BAG. Before addressing what has changed with this release we would like to take a moment to thank everyone that has been downloading and using the first release. It's very exciting to see how people from various disciplines found ways to apply 3D BAG for their use cases! (also see our new In the media page). A special thanks also to everyone that filled out our feedback forms or gave us feedback in other ways. This is much appreciated!</p> <p>For this second release we focused primarily on improving the data quality and the way the data is disseminated. The overall geometric validity of the 3D models has risen to 98.25% (up from ~89% in the previous release). Another highlight is that the 3D outputs are no longer triangulated, as requested by several users. Altogether this should make it easier to use our models in other software. These and more changes are described below in more detail. </p> <p>This 3D BAG release contains 9 692 978 buildings. This is 7.72% less buildings than available in the BAG dataset, mostly due to outdated or otherwise insufficient input data. We hope to do a release based on the updated AHN4 soon, but this release is still based on AHN3.</p> <p>Thank you for using 3D BAG!</p>"},{"location":"overview/release_notes/#added_1","title":"Added","text":"<ul> <li>The building part ID (<code>pand_deel_id</code>) to the 3D layers. Previously it was only part of the 2D layers.</li> <li>A new layer (<code>ondergrond</code>) with parts of the building polygons that were cut off during the reconstruction, because they were detected as the ground.</li> </ul>"},{"location":"overview/release_notes/#changed-fixed_2","title":"Changed / Fixed","text":"<ul> <li>Update of the source data sets (BAG, BGT, Top10NL) to the version available on 2021-09-07.</li> <li>3D geometries are not triangulated anymore in the CityJSON, GeoPackage, PostgreSQL formats. The OBJ format remains triangulated.</li> <li>The CityJSON exporter was rewritten<ul> <li>The semantic surfaces of type <code>WallSurface</code> now have an additional boolean attribute <code>on_footprint</code> which indicates if a WallSurface is on a footprint edge or not.</li> <li>The original BAG footprint is now included for each object</li> <li>CityObject ID's are now based on the BAG <code>identificatie</code> attribute</li> </ul> </li> <li> <p>Improvements in the reconstruction algorithm</p> <ul> <li>Added new triangulation-based snapping node. The goal of this node is to remove (near) duplicate vertices in the 2D roof partition without introducing topological problems. This fixes problems with e.g. spikes (due vertices with invalid coordinates) and missing faces in the final 3D models. With this improvement we have &gt;98% valid geometries, up from 89% in the previous version. We checked this with val3dity.</li> <li>Added a nearest neighbor interpolation for no-data pixels in the heightfield that is used during optimisation. This interpolation picks the lowest value in the neighborhood (with radius of 10 cm at the moment) of the nodata pixel of interest. This should reduce the occurence of erroneous thin vertical 'screens' in building models (several still remain however).</li> <li>Several other smaller bugfixes and improvements.</li> </ul> </li> <li> <p>The object ID in the OBJ files is now the BAG ID (<code>identificatie</code>) instead of an integer sequence.</p> </li> <li>Attribute name changes:</li> </ul> From To _lod11_replace lod11_replace _semantics_values semantics_values _tile_id tile_id _reconstruction_skipped reconstruction_skipped _t_run q_t_run _roofplane_cnt q_roofplane_cnt _data_area q_data_area _nodata_area q_nodata_area _data_coverage q_data_coverage _roof_pt_cnt q_roof_pt_cnt _wall_pt_cnt q_wall_pt_cnt _unsegmented_pt_cnt q_unsegmented_pt_cnt _pc2m_error_hist q_pc2m_error_hist _m2pc_error_hist q_m2pc_error_hist _m2pc_error_max q_m2pc_error_max _rmse q_rmse <ul> <li>The roofpart ID (<code>dd_id</code>) starts with 0. Previously it started with 1.</li> <li>The value <code>could not detect</code> of the <code>dak_type</code> attribute has been changed to <code>no planes</code>.</li> <li>GPKG format: preserve the feature ID (<code>fid</code>) in the <code>pand</code> layer so it is possible to join the other layers on <code>fid</code>.</li> <li>Fixed the duplicate / cloned objects in the output.</li> <li>Improve 3D tiles export and rendering in the Viewer</li> </ul>"},{"location":"overview/release_notes/#known-issues_1","title":"Known issues","text":"<ul> <li>Artificial vertical 'screens' still occur in some building models.</li> <li>1.75% of the buildings is geometrically invalid, consult the <code>val3dity_codes</code> attribute to find out which ones.</li> <li>Missing tiles for download (in all formats): 10, 41, 42, 117, 143, 228, 301, 381, 776, 1485, 1876, 2178, 2333, 2436, 2511, 2662, 2713, 5158, 5186, 5228, 6813, 7364. In the 3D viewer some additional tiles may be missing.</li> <li>Self-intersection on buildings that have a roofplane detected that extends below <code>h_maaiveld</code>.</li> <li>Possibly incaccurate building geometry for buildings with glass roofs.</li> <li>Intersecting 3D geometries in case the input BAG footprints overlap.</li> <li>Possible duplicate vertices in CityJSON files.</li> </ul>"},{"location":"overview/release_notes/#21031-beta","title":"21.03.1 \u2013 beta","text":"<p>Release date: 26 March 2021</p>"},{"location":"overview/release_notes/#added_2","title":"Added","text":"<ul> <li>A brand new 3D viewer.</li> <li>Multiple LoDs, LoD1.2, LoD1.3, LoD2.2.</li> <li>2D and 3D variants of all LoDs. The 3D models are triangulated.</li> <li>More accurate height calculation, due to our new reconstruction method.</li> <li>Underground buildings and floating buildings are removed, underground parts are cut off from the models. This means that we modify the incoming BAG footprints by removing the underground parts.</li> <li>Integrated validation of the 3D models with val3dity.</li> <li>OBJ and CityJSON data formats.</li> <li>A completely re-worked documentation.</li> <li>Report issues on individual buildings and provide general feedback with a form.</li> </ul>"},{"location":"overview/release_notes/#changed","title":"Changed","text":"<ul> <li>Downloads are available in tiles instead of the whole country. Except the PostgreSQL backup, which is only available for the whole country.</li> <li>Switched to BAG 2.0.</li> <li>Basically all the attributes have changed. Note that due to our new reconstruction method, the meaning of the building height percentiles <code>h_dak</code> have changed too. Previously we had multiple percentiles for the ground height, while there is only one <code>h_maaiveld</code> now.</li> <li>All the URLs.</li> <li>New contact information.</li> </ul>"},{"location":"overview/release_notes/#removed","title":"Removed","text":"<ul> <li>CSV data format.</li> </ul>"},{"location":"overview/release_notes/#known-issues_2","title":"Known issues","text":"<ul> <li>Some buildings have a 'spike': a large deviation in the building geometry due to one vertex with an erroneous coordinate (3D models only).</li> <li>Not all buildings are geometrically valid (eg. missing face). Note that this should be evident from the val3dity_codes attribute (3D models only).</li> <li>Missing tiles (in all formats): 6, 8, 10, 20, 42, 50, 51, 52, 53, 57, 309, 736, 1389, 2178, 3647. On the top of the previous list, the following tiles are missing a CityJSON format: 19, 251, 298, 365, 381, 702, 1051, 1812, 2535, 2700, 2962, 2996, 3173, 3324, 3381, 3796, 4248, 4511, 4615, 4729, 5316, 5411, 6237, 6690, 6986, 7290, 7470, 7597, 8061.</li> </ul>"},{"location":"overview/sources/","title":"Data sources","text":"<p>The quality and characteristics of the 3D BAG partly depend on the source data that we use. The better the input, the better the 3D BAG. Several of our choices were governed by the characteristics of these input data sets. Therefore, in order to better understand the 3D BAG, it is important to take a look at the data sources first.</p>"},{"location":"overview/sources/#bag","title":"BAG","text":"<p>The Register of Buildings and Addresses (BAG) is the most detailed, openly available data set on buildings and addresses in the Netherlands. It contains information about each address in a building, such as its current use, construction date or registration status. The data set is regularly updated as new buildings are registered, built or demolished. The municipalities are responsible for the acquisition, maintenance and quality assurance of the data within their boundaries. The data from all municipalities together are centralised and published by Kadaster.</p> <p>The BAG contains several types of geometrical objects. For the 3D BAG only the buildings are used. The polygons in the BAG represent the outline of the building as the projection of the building as seen from above (including underground parts). While in comparison, the BGT registers the footprint of the building as it touches the terrain. The geometry of BAG buildings is acquired from aerial photos and terrestrial measurements and the data positional data accuracy is 30 cm. An overview of the attributes of the BAG can be found in the BAG manual. </p> <p>As source for the 3D BAG we always use the most recent BAG 2.0 data.</p>"},{"location":"overview/sources/#ahn","title":"AHN","text":"<p>The National Height Model of the Netherlands (AHN) is the openly available elevation data set of the Netherlands. This is acquired through airborne laser scanning (LiDAR), with an average point density of 8 points per square meter for the current version.</p> <p>For the 3D BAG we use a smart combination of AHN3 and AHN4. AHN4 was acaquired between 2014 and 2019, and AHN4 between 2020 and 2022. Here you can find the collection dates for each region in the Netherlands. Be aware that if a building was very recently constructed or changed, it can happen that this building does not exist or is no longer correct in the the 3D BAG.</p> <p>For the latest version of the 3D BAG we use both AHN3 and AHN4. This is to guarantee the best possible 3D reconstruction for each building. If a building has no mutation since the acquisition of AHN3, we pick the pointcloud with the best point coverage. This reduces the odds that a building contains small errors due to large no data gaps in the point cloud.</p> <p>There can always be some variation in the point density between buildings and even within one building. There can be no data gaps in the point cloud, caused by an occlusion through objects, water ponds on roofs and scan angle. The number of available points, their distribution and accurate classification has a very significant impact on the quality of the reconstructed models. The quality attributes that we calculate for and assign to each model provide an indication of this quality.</p>"},{"location":"overview/sources/#top10nl","title":"TOP10NL","text":"<p>The TOP10NL is part of the TOPNL data sets, which belong to the Topographic Register of the Netherlands. The TOP10NL can be used at various scales, ranging from 1:5,000 to 1:25,000. It models several object types, including buildings and their function. The TOPNL data can be used as data source, as well as base maps in visualisations.</p> <p>From the TOP10NL we only use the buildings in order to identify the greenhouses and large warehouses among the BAG objects. Due to their glass roof, greenhouses are problematic for our reconstruction algorithm. Therefore we only model these with a simplified shape.</p>"},{"location":"schema/attributes/","title":"Data Attributes","text":""},{"location":"schema/attributes/#b3_dak_type","title":"<code>b3_dak_type</code>","text":"<p>Roof type of the building.</p> <p>Data type: categorical</p> <p>Unit: -</p> <p>Values:</p> Values Description <code>slanted</code> Roof with at least one slanted surface. <code>multiple horizontal</code> Roof with multiple, only horizontal surfaces. <code>single horizontal</code> Roof with a single horizontal surface. <code>no points</code> No point was found for the building. <code>could not detect</code> Could not detect a roof surface, even though points were found."},{"location":"schema/attributes/#b3_dd_id","title":"<code>b3_dd_id</code>","text":"<p>Dak Deel ID. Roofpart ID.</p> <p>Data type: nominal number</p> <p>Unit: -</p>"},{"location":"schema/attributes/#b3_h_dak_50p","title":"<code>b3_h_dak_50p</code>","text":"<p>Median elevation on roof surface based on reconstructed 3D model in LoD2.2. Given as elevation above sea level (NAP).</p> <p>Data type: real number</p> <p>Unit: metre</p>"},{"location":"schema/attributes/#b3_h_dak_70p","title":"<code>b3_h_dak_70p</code>","text":"<p>The 70th percentile elevation on roof surface based on reconstructed 3D model in LoD2.2. Given as elevation above sea level (NAP).</p> <p>Data type: real number</p> <p>Unit: metre</p>"},{"location":"schema/attributes/#b3_h_dak_max","title":"<code>b3_h_dak_max</code>","text":"<p>Maximum elevation on roof surface based on reconstructed 3D model in LoD2.2. Given as elevation above sea level (NAP). Unit: metre.</p> <p>Data type: real number</p> <p>Unit: metre</p>"},{"location":"schema/attributes/#b3_h_dak_min","title":"<code>b3_h_dak_min</code>","text":"<p>Minimum elevation on roof surface based on reconstructed 3D model in LoD2.2. Given as elevation above sea level (NAP).</p> <p>Data type: real number</p> <p>Unit: metre</p>"},{"location":"schema/attributes/#b3_h_maaiveld","title":"<code>b3_h_maaiveld</code>","text":"<p>Elevation above sea level (Amsterdam Ordnance Datum) at the ground level of the building. Calculated as the 5th percentile of the ground points found within a 4 meter radius of the building.</p> <p>Data type: real number</p> <p>Unit: metre</p>"},{"location":"schema/attributes/#b3_kas_warenhuis","title":"<code>b3_kas_warenhuis</code>","text":"<p>The building is greenhouse or warehouse (according to TOP10NL) or has an area of over 70000 square meters.</p> <p>Data type: categorical</p> <p>Unit: yes/no</p>"},{"location":"schema/attributes/#b3_mutatie_ahn3_ahn4","title":"<code>b3_mutatie_ahn3_ahn4</code>","text":"<p><code>true</code> if there was a significant change detected in the building between the AHN3 and AHN4 pointclouds.</p> <p>Data type: categorical</p> <p>Unit: yes/no</p>"},{"location":"schema/attributes/#b3_nodata_fractie_ahn3","title":"<code>b3_nodata_fractie_ahn3</code>","text":"<p>Fraction of the footprint area that has no point data in the AHN3 point cloud. Only points classified as building or ground are considered.</p> <p>Data type: real number</p> <p>Unit: -</p>"},{"location":"schema/attributes/#b3_nodata_fractie_ahn4","title":"<code>b3_nodata_fractie_ahn4</code>","text":"<p>Fraction of the footprint area that has no point data in the AHN4 point cloud. Only points classified as building or ground are considered.</p> <p>Data type: real number</p> <p>Unit: -</p>"},{"location":"schema/attributes/#b3_nodata_radius_ahn3","title":"<code>b3_nodata_radius_ahn3</code>","text":"<p>Radius of the largest circle inside the BAG polygon without any AHN3 points. Only points classified as building or ground are considered.</p> <p>Data type: real number</p> <p>Unit: metre</p>"},{"location":"schema/attributes/#b3_nodata_radius_ahn4","title":"<code>b3_nodata_radius_ahn4</code>","text":"<p>Radius of the largest circle inside the BAG polygon without any AHN4 points. Only points classified as building or ground are considered.</p> <p>Data type: real number</p> <p>Unit: metre</p>"},{"location":"schema/attributes/#b3_pand_deel_id","title":"<code>b3_pand_deel_id</code>","text":"<p>Buildingpart ID. A building can have multiple parts when it was cut into parts because of underground parts.</p> <p>Data type: nominal number</p> <p>Unit: -</p>"},{"location":"schema/attributes/#b3_puntdichtheid_ahn3","title":"<code>b3_puntdichtheid_ahn3</code>","text":"<p>Density of the AHN3 point cloud on BAG polygon. Only points classified as building or ground are considered.</p> <p>Data type: nominal number</p> <p>Unit: points per square metre</p>"},{"location":"schema/attributes/#b3_puntdichtheid_ahn4","title":"<code>b3_puntdichtheid_ahn4</code>","text":"<p>Density of the AHN4 point cloud on BAG polygon. Only points classified as building or ground are considered. Unit: points per square metre.</p> <p>Data type: nominal number</p> <p>Unit: points per square metre</p>"},{"location":"schema/attributes/#b3_pw_bron","title":"<code>b3_pw_bron</code>","text":"<p>Source of the point cloud, eg. AHN3 or AHN4.</p> <p>Data type: text</p> <p>Unit: -</p>"},{"location":"schema/attributes/#b3_pw_datum","title":"<code>b3_pw_datum</code>","text":"<p>Acquisition year of the point cloud. This is determined by looking at the GPS timestamps on the AHN points for the building. In case good GPS timestamps are not available the file creation date of the point cloud file is used.</p> <p>Data type: date</p> <p>Unit: <code>YYYY</code></p>"},{"location":"schema/attributes/#b3_pw_selectie_reden","title":"<code>b3_pw_selectie_reden</code>","text":"<p>Provides information about the pointcloud selection indicated in the <code>pw_bron</code> attribute.</p> <p>Data type: categorical</p> <p>Unit: -</p> <p>Values:</p> Values Description <code>PREFERRED_AND_LATEST</code> The selected point cloud has a good point coverage and there are no newer point clouds available that also have good point coverage. <code>PREFERRED_NOT_LATEST</code> The selected point cloud has a good point coverage and there is a newer point cloud available that also has good coverage. Newer pointcloud was not selected because no mutation was detected. <code>LATEST_WITH_MUTATION</code> The selected point cloud has a good point coverage and a mutation was detected compared to the older pointclouds. <code>_HIGHEST_YET_INSUFFICIENT_COVERAGE</code> The selected point cloud has possible poor point coverage. Nonetheless, it is the point cloud with the highest point coverage among all available point clouds. <code>_LATEST_BUT_OUTDATED</code> The selected pointcloud is the latest one available, but it may be outdated for this building. This happens when the year of construction is equal or later than the point cloud acquisition date."},{"location":"schema/attributes/#b3_reconstructie_onvolledig","title":"<code>b3_reconstructie_onvolledig</code>","text":"<p>Indicates whether full LoD1.2/LoD1.3/LoD2.2 reconstruction was skipped for this feature.</p> <p>Data type: None</p> <p>Unit: None</p>"},{"location":"schema/attributes/#b3_rmse_lod12","title":"<code>b3_rmse_lod12</code>","text":"<p>Root Mean Square Error of the 3D distances between the point cloud and the LoD1.2 model. Unit: metre.</p> <p>Data type: real number</p> <p>Unit: metre</p>"},{"location":"schema/attributes/#b3_rmse_lod13","title":"<code>b3_rmse_lod13</code>","text":"<p>Root Mean Square Error of the 3D distances between the point cloud and the LoD1.3 model. Unit: metre.</p> <p>Data type: real number</p> <p>Unit: metre</p>"},{"location":"schema/attributes/#b3_rmse_lod22","title":"<code>b3_rmse_lod22</code>","text":"<p>Root Mean Square Error of the 3D distances between the point cloud and the LoD2.2 model. Unit: metre.</p> <p>Data type: real number</p> <p>Unit: metre</p>"},{"location":"schema/attributes/#b3_val3dity_lod12","title":"<code>b3_val3dity_lod12</code>","text":"<p>Val3dity error codes for the LoD1.2 3D model. Empty list means valid geometry.</p> <p>Data type: list</p> <p>Unit: -</p>"},{"location":"schema/attributes/#b3_val3dity_lod13","title":"<code>b3_val3dity_lod13</code>","text":"<p>Val3dity error codes for the LoD1.3 3D model. Empty list means valid geometry.</p> <p>Data type: list</p> <p>Unit: -</p>"},{"location":"schema/attributes/#b3_val3dity_lod22","title":"<code>b3_val3dity_lod22</code>","text":"<p>Val3dity error codes for the LoD2.2 3D model. Empty list means valid geometry.</p> <p>Data type: list</p> <p>Unit: -</p>"},{"location":"schema/attributes/#b3_volume_lod12","title":"<code>b3_volume_lod12</code>","text":"<p>Volume of the LoD1.2 model. Unit: cubic metre.</p> <p>Data type: real number</p> <p>Unit: cubic metre</p>"},{"location":"schema/attributes/#b3_volume_lod13","title":"<code>b3_volume_lod13</code>","text":"<p>Volume of the LoD1.3 model. Unit: cubic metre.</p> <p>Data type: real number</p> <p>Unit: cubic metre</p>"},{"location":"schema/attributes/#b3_volume_lod22","title":"<code>b3_volume_lod22</code>","text":"<p>Volume of the LoD2.2 model. Unit: cubic metre.</p> <p>Data type: real number</p> <p>Unit: cubic metre</p>"},{"location":"schema/attributes/#begingeldigheid","title":"<code>begingeldigheid</code>","text":"<p>Relates to the building registration history and version.</p> <p>Data type: date</p> <p>Unit: <code>YYYY-MM-DD</code></p> <p>Source: BAG. See BAG Catalogus</p>"},{"location":"schema/attributes/#documentdatum","title":"<code>documentdatum</code>","text":"<p>Building registration date.</p> <p>Data type: date</p> <p>Unit: <code>YYYY-MM-DD</code></p> <p>Source: BAG. See BAG Catalogus</p>"},{"location":"schema/attributes/#documentnummer","title":"<code>documentnummer</code>","text":"<p>Document number.</p> <p>Data type: text</p> <p>Unit: <code>YYYY-MM-DD</code></p> <p>Source: BAG. See BAG Catalogus</p>"},{"location":"schema/attributes/#eindgeldigheid","title":"<code>eindgeldigheid</code>","text":"<p>Relates to the building registration history and version.</p> <p>Data type: date</p> <p>Unit: <code>YYYY-MM-DD</code></p> <p>Source: BAG. See BAG Catalogus</p>"},{"location":"schema/attributes/#eindregistratie","title":"<code>eindregistratie</code>","text":"<p>Relates to the building registration history and version.</p> <p>Data type: date-time</p> <p>Unit: <code>YYYY-MM-DDThh:mm:ss.sss</code></p> <p>Source: BAG. Zie BAG Catalogus</p>"},{"location":"schema/attributes/#geconstateerd","title":"<code>geconstateerd</code>","text":"<p>Indicates that the buildings has included in the BAG registration.</p> <p>Data type: categorical</p> <p>Unit: yes/no</p> <p>Source: BAG. See BAG Catalogus</p>"},{"location":"schema/attributes/#identificatie","title":"<code>identificatie</code>","text":"<p>ID of a building.</p> <p>Data type: text</p> <p>Unit: -</p> <p>Source: BAG. See BAG Catalogus</p>"},{"location":"schema/attributes/#oorspronkelijkbouwjaar","title":"<code>oorspronkelijkbouwjaar</code>","text":"<p>Building construction year.</p> <p>Data type: date</p> <p>Unit: <code>YYYY</code></p>"},{"location":"schema/attributes/#status","title":"<code>status</code>","text":"<p>The current fase in the buildings life-cycle.</p> <p>Data type: categorical</p> <p>Unit: -</p> <p>Source: BAG. See BAG Catalogus</p>"},{"location":"schema/attributes/#tijdstipeindregistratielv","title":"<code>tijdstipeindregistratielv</code>","text":"<p>Relates to the building registration history and version.</p> <p>Data type: date-time</p> <p>Unit: <code>YYYY-MM-DDThh:mm:ss.sss</code></p> <p>Source: BAG. See BAG Catalogus</p>"},{"location":"schema/attributes/#tijdstipinactief","title":"<code>tijdstipinactief</code>","text":"<p>Relates to the building registration history and version.</p> <p>Data type: date-time</p> <p>Unit: <code>YYYY-MM-DDThh:mm:ss.sss</code></p> <p>Source: BAG. See BAG Catalogus</p>"},{"location":"schema/attributes/#tijdstipinactieflv","title":"<code>tijdstipinactieflv</code>","text":"<p>Relates to the building registration history and version.</p> <p>Data type: date-time</p> <p>Unit: <code>YYYY-MM-DDThh:mm:ss.sss</code></p> <p>Source: BAG. See BAG Catalogus</p>"},{"location":"schema/attributes/#tijdstipnietbaglv","title":"<code>tijdstipnietbaglv</code>","text":"<p>Relates to the building registration history and version.</p> <p>Data type: date-time</p> <p>Unit: <code>YYYY-MM-DDThh:mm:ss.sss</code></p> <p>Source: BAG. See BAG Catalogus</p>"},{"location":"schema/attributes/#tijdstipregistratie","title":"<code>tijdstipregistratie</code>","text":"<p>Relates to the building registration history and version.</p> <p>Data type: date-time</p> <p>Unit: <code>YYYY-MM-DDThh:mm:ss.sss</code></p> <p>Source: BAG. Zie BAG Catalogus</p>"},{"location":"schema/attributes/#tijdstipregistratielv","title":"<code>tijdstipregistratielv</code>","text":"<p>Relates to the building registration history and version.</p> <p>Data type: date-time</p> <p>Unit: <code>YYYY-MM-DDThh:mm:ss.sss</code></p> <p>Source: BAG. See BAG Catalogus</p>"},{"location":"schema/attributes/#voorkomenidentificatie","title":"<code>voorkomenidentificatie</code>","text":"<p>Relates to the building registration history and version.</p> <p>Data type: ordinal number</p> <p>Unit: -</p> <p>Source: BAG. See BAG Catalogus</p>"},{"location":"schema/concepts/","title":"General Concepts","text":""},{"location":"schema/concepts/#level-of-detail-lod","title":"Level of Detail (LoD)","text":"<p>All spatial models are abstractions of reality. Some are closer to the real thing, while others are less so. In 3D GIS, the Level of Detail (LoD) of a 3D model describes the amount of detail that is captured in the model, although a high LoD can still be an inaccurate approximation of reality. For instance, consider a very simple building with four corners and a gabled roof. A very rough approximation of this building would be a cube. While on the other end, we could have individual surfaces in the model that follow the shape of the building exactly, each of them labelled with additional information like surface type, material etc.</p> <p>Higher LoDs (LoD2 and above) can label the surfaces of the model based on their function in the real object. These labels are called semantics, and accordingly we call the labelled surfaces semantic surfaces. For instance in case of building models, we can identify a ground surface, wall surface, roof surface etc.</p> <p>In the 3D BAG, we use the so called improved LoD specification, as it is displayed in the figure below.</p> An improved LOD specification for 3D building models. Filip Biljecki, Hugo Ledoux, and Jantien Stoter. Computers, Environment and Urban Systems, 59: 25\u201337, 2016. DOI <p>For the 3D BAG the relevant LoDs are 1.2, 1.3, and 2.2. Note that apart from the amount of geometric detail, the key difference between LoD1 and LoD2 is the presence of semantic surfaces, to allow, for example, roof surfaces to be coloured red and wall surfaces to be coloured grey. Furthermore, the distinction between LoD1.2 and LoD1.3 is that LoD1.3 distinguishes between significant height differences within one building, while in case of LoD1.2 the whole model has a uniform height.</p>"},{"location":"schema/concepts/#3d-geometric-primitives","title":"3D geometric primitives","text":"<p>In 2D GIS, the geometry of objects can be represented by points, lines, polygons and their variations. There are standards that prescribe a set of rules for these primitives so that data can be exchanged in an interoperable manner (eg Simple Feature Access). </p> <p>In 3D GIS, the geometric primitives and their rules need to be extended to the third dimension, so that their interactions can be described in a meaningful way. The figure below gives an overview of the commonly used primitives in 3D GIS.</p> 3D primitives handled by val3dity. See: Val3dity: validation of 3D GIS primitives according to the international standards. Hugo Ledoux. Open Geospatial Data, Software and Standards 3 (1), 2018, pp. 1. DOI <p>For the 3D BAG the most relevant primitive is the Solid, as we treat the building models as Solids in our process. This distinction is important, because of the (stricter) rules that apply to Solids, compared to other 3D primitives.</p> <p>3D primitives and data formats</p> <p>Not every data format supports the 3D primitives mentioned above. In fact, this applies to all our export formats except CityJSON. Therefore, in such formats we use the geometry types that are the closest equivalent to Solids. The PostgreSQL backup is a bit of an outlier here, because technically PostGIS can store Solids, but only with the SFCGAL extension. In order to cause the least friction for restoring the PostgreSQL backup, we store the 3D geometries as <code>MultiPolygonZ</code>.</p>"},{"location":"schema/concepts/#valid-3d-geometries","title":"Valid 3D geometries","text":"<p>Having valid geometries is important for using the data in various applications. Standards help to define a common set of rules to which both data producers and consumers can adhere to, when working with data. val3dity is a software that validates 3D primitives according to the international standard ISO19107.</p> <p>We integrated val3dity into our process, and so we validate each 3D model after it is reconstructed. However, the building models are validated independently as they go through the reconstruction process. Therefore, we cannot detect errors in the interaction of multiple models (error codes above 500).</p> <p>b3_val3dity_lod12\", \"b3_val3dity_lod13\", \"b3_val3dity_lod22</p> <p>The attributes starting with <code>b3_val3dity_</code> store the error codes from val3dity (if any) for a model.</p> val3dity error codes. See the full description of each code in the val3dity documentation."},{"location":"schema/layers/","title":"Data Layers","text":"<p>The diagram above shows the relation between a building in the real world and how is it modeled in the 3D BAG. The BAG models buildings with their largest extent as viewed from above. In practice this means a single 2D polygon per building, as it is displayed by the black polygon in the figure. Therefore, the BAG polygon may also include parts of the building that are below terrain level.</p> <p>In order to create an accurate model of the above terrain parts of a building, we cut off the below terrain parts from the BAG polygon. We only consider the parts above the terrain, because we do not have data on the 3D extent of the parts below the terrain.</p> <p>From the parts above terrain we then generate the 3D models in LoD1.2, 1.3 and 2.2. We realise that for some applications it is more suitable to read 2D polygons, and the building height information from attributes. Therefore, we also provide a 2D counterpart in each LoD.</p> <p>b3_kas_warenhuis</p> <p>In case of greenhouses and large warehouses we do not cut off any parts of the BAG model and take the polygon as is, and only generate an LoD1.1 blockmodel. Thus, such buildings only have an LoD1.1 model and are marked with the attribute value <code>b3_kas_warenhuis</code><code>= true</code>.</p> <p>In case of the 2D models, the polygons represent the 2D projection of the roof planes of the 3D model. For LoD1.2 and LoD1.3, the 3D model can be fully reconstructed from the 2D model, by taking the 2D polygons and extruding each to one of their <code>b3_h_dak_*</code> height values from their heights at surface level which is stored in b3_h_maaiveld. However, this is not true for the LoD2.2 models, since here we have slanted roof planes, which cannot be represented by a 2D polygon and a single height value.</p> <p>The 3D BAG has 6 geometric representations of a BAG object (a feature). The 6 representations are the 2D and 3D variants of the LoD1.2, LoD1.3 and LoD2.2 models of the feature. Depending on the representation, a single feature can have multiple geometry parts.</p> <p>Some buildings have multiple disjoint part above the terrain, while they are connected with an underground garage for instance. In such cases, the <code>b3_pand_deel_id</code> can identify these parts within the same feature.</p> <p>The figure below illustrates the relation between the feature and the various geometry parts above terrain.</p> <p></p>"},{"location":"schema/layers/#calculation-of-height-values","title":"Calculation of height values","text":"<p>Each LoD of a building in 3D BAG has one ground height (<code>b3_h_maaiveld</code>) and one or more roof heights (<code>b3_h_dak_*</code>). All heights are given in RD/NAP (EPSG:7408, part of EPSG:7415).</p> <p>The ground height is determined as the 5th elevation percentile of all the AHN ground points that were found in a 4 meter radius around the BAG polygon of a building.</p> <p>The roof heights (<code>b3_h_dak_*</code>) of a building are based on the most detaled reconstructed 3D model (LoD2.2). Per roofpart we always compute the 0th (minimum height), 50th (median height), 70th, and 100th (maximum)  percentiles. For instance <code>b3_h_dak_50p</code> means the median height of the roofpart.</p>"},{"location":"schema/layers/#heights-in-2d-vs-3d-layers","title":"Heights in 2D vs 3D layers","text":"<p>For the 2D layers the heights are the statistcal aggregates as explained above and given as an attribute for each modelled roofpart.</p> <p>For the 3D layers the heights are not given as attributes since they are explicitly modelled in the 3D geometry of the model. For the LoD1.2 and LoD1.3 layers (where each roofpart is modelled at a single height) the 70th percentile roof heights are used in the extrusion. In the LoD2.2 3D (<code>lod22_3d</code>) layer the roofs are directly modelled with the roof planes that were detected in the AHN point cloud.</p> <p>Height picking in the 3D webviewer</p> <p>If you click on a building in our 3D webviewer, you'll notice a height value shown in the bottom left corner of the screen. This is the height of the building at the clicked location as measured from the base of the building, ie. <code>b3_h_maaiveld</code> is already subtracted from this.</p>"},{"location":"schema/layers/#ondergrond","title":"<code>ondergrond</code>","text":"<p>The underground parts of a BAG polygon that were removed during the reconstruction from the LoD1.2, LoD1.3 and LoD2.2 models.</p>"},{"location":"schema/layers/#pand","title":"<code>pand</code>","text":"<p>Stores the attributes and geometry of the <code>Pand</code> object of the BAG, plus the attributes of the 3D BAG that relate to the whole building. Contains only those buildings that went into the reconstruction. The attribute <code>fid</code> is the unique, numeric ID of the objects. Besides being the primary key, <code>fid</code> is also used for joining the other layers to <code>pand</code>.</p>"},{"location":"schema/layers/#lod12_3d","title":"<code>lod12_3d</code>","text":"<p>A 3D model of the building parts above the terrain, modelled in LoD1.2. Can join to <code>pand</code> on <code>fid</code>.</p>"},{"location":"schema/layers/#lod12_2d","title":"<code>lod12_2d</code>","text":"<p>The 2D projection of the LoD1.2 model. The elevation of the detected LoD1.2 roof planes are stored as height attributes (<code>h_dak_*</code>). Only the above terrain parts of the BAG footprint are included. Can join to <code>pand</code> on <code>fid</code>.</p>"},{"location":"schema/layers/#lod13_3d","title":"<code>lod13_3d</code>","text":"<p>A 3D model of the building parts above the terrain, modelled in LoD1.3. Can join to <code>pand</code> on <code>fid</code>.</p>"},{"location":"schema/layers/#lod13_2d","title":"<code>lod13_2d</code>","text":"<p>The 2D projection of the LoD1.3 model. The elevation of the detected LoD1.3 roof planes are stored as height attributes (<code>h_dak_*</code>). Only the above terrain parts of the BAG footprint are included. Can join to <code>pand</code> on <code>fid</code>.</p>"},{"location":"schema/layers/#lod22_3d","title":"<code>lod22_3d</code>","text":"<p>A 3D model of the building parts above the terrain, modelled in LoD2.2. Can join to <code>pand</code> on <code>fid</code>.</p>"},{"location":"schema/layers/#lod22_2d","title":"<code>lod22_2d</code>","text":"<p>The 2D projection of the LoD2.2 model. The elevation of the detected LoD2.2 roof planes are stored as height attributes (<code>h_dak_*</code>). Note that the slanted roof planes of the 3D model cannot be reconstructed from these 2D polygons and height attributes. Only the above terrain parts of the BAG footprint are included. Can join to <code>pand</code> on <code>fid</code>.</p>"}]}